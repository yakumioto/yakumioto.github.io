<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Posts | 一只麻酱</title>
<meta name="keywords" content="" />
<meta name="description" content="Posts - 一只麻酱">
<meta name="author" content="Mioto Yaku">
<link rel="canonical" href="https://mioto.me/post/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css" integrity="sha256-yIlj/i15RiAA/Q&#43;xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://mioto.me/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://mioto.me/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://mioto.me/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://mioto.me/apple-touch-icon.png">
<link rel="mask-icon" href="https://mioto.me/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.110.0">
<link rel="alternate" type="application/rss+xml" href="https://mioto.me/post/index.xml">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-102233768-1', 'auto');
	
	ga('send', 'pageview');
}
</script><meta property="og:title" content="Posts" />
<meta property="og:description" content="Mioto&#39;s Blog" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://mioto.me/post/" /><meta property="og:site_name" content="Mioto&#39;s Blog" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Posts"/>
<meta name="twitter:description" content="Mioto&#39;s Blog"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://mioto.me/post/"
    }
  ]
}
</script>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://mioto.me" accesskey="h" title="一只麻酱 (Alt + H)">一只麻酱</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://mioto.me/archives/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://mioto.me/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="https://mioto.me">主页</a></div>
  <h1>Posts</h1>
</header>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Fabric 中 etcdraft 共识讲解
    </h2>
  </header>
  <section class="entry-content">
    <p>为什么要通过 etcdraft 来进行共识?
我觉得有以下原因
solo 并不适合大多数场景, 例如: 组织A, 组织B, 都想在自己放置共识节点 kafka 虽然能满足以上需求, 但是 kafka 加上 zookeeper 需要额外部署并且实在是太重了, 不方便部署 所以基于 etcdraft 的共识来了, 解决了以上的痛点
重要的话说三遍!
千万不要错过文章中的源码部分, 里面有很多很多的注释!!! 千万不要错过文章中的源码部分, 里面有很多很多的注释!!! 千万不要错过文章中的源码部分, 里面有很多很多的注释!!!
核心接口 以下是我认为实现 etcdraft 共识核心的接口
// ClusterServer 集群Server接口 type ClusterServer interface { Step(Cluster_StepServer) error } // ClusterClient 集群Client接口 type ClusterClient interface { Step(ctx context.Context, opts ...grpc.CallOption) (orderer.Cluster_StepClient, error) } // Handler 用于共识的两个接口 type Handler interface { OnConsensus(channel string, sender uint64, req *orderer.ConsensusRequest) error OnSubmit(channel string, sender uint64, req *orderer....</p>
  </section>
  <footer class="entry-footer"><span title='2020-01-15 00:00:00 +0000 UTC'>一月 15, 2020</span>&nbsp;·&nbsp;8 分钟&nbsp;·&nbsp;Mioto Yaku</footer>
  <a class="entry-link" aria-label="post link to Fabric 中 etcdraft 共识讲解" href="https://mioto.me/2020/01/etcdraft-exploration-in-fabric-orderer/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>回顾 2019
    </h2>
  </header>
  <section class="entry-content">
    <p>第一次写年终总结, 每次准备写脑海里都飘过 “你比上一年又重了N公斤”, 今年可以写的感觉也并不多, 但是总结一下总是好的.
体重 涨幅 0.052, 目前体重算 95KG 好了, 另外明年的目标一定要下降到 70 左右!!!
加薪 涨幅 0.428, 虽然加薪来的迟了, 但是总比没有要好.
学习 虽然 Hyperledger Fabric 国密支持并不是我实现, 但是我也充分参与到了其中, 算是对 TLS, 加密, 签名, 证书 有了较为深入的研究. 完成了对 Hyperledger Fabric statedb 的扩展, 支持了 TiDB. 部署实施了两个 Hyperledger Fabric 的落地项目. 对 Hyperledger Fabric 以及 Hyperledger Fabric Go SDK 有了较为深入的了解. 给 Hyperledger Fabric Go SDK 贡献了2次源码, 支持了 Java Chaincode 的 安装, 实例化, 升级. 编写了 hlf-deploy 项目, 支持了几乎所有的 Hyperledger Fabric 所有的操作, 例如: 动态更新通道, 动态切换共识算法 等....</p>
  </section>
  <footer class="entry-footer"><span title='2020-01-02 00:00:00 +0000 UTC'>一月 2, 2020</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;Mioto Yaku</footer>
  <a class="entry-link" aria-label="post link to 回顾 2019" href="https://mioto.me/2020/01/2019review/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Go 100 行实现 HTTP(S) 正向代理
    </h2>
  </header>
  <section class="entry-content">
    <p>目标是现实一个 HTTP HTTPS 的代理服务器, 目前代理的实现方法有两种
普通代理: 这种代理扮演的是中间人角色, 对于客户端来说, 它就服务器, 对于服务端来说, 它是客户端, 它负责在中间来回传递 HTTP 报文
隧道代理: 它是通过 HTTP 正文部分(body) 完成代理, 以 HTTP 的方式实现基于 TCP 的应用层协议代理, 这种代理使用 HTTP 的 CONNECT 方法建立连接
这是一次 HTTP 的请求, 用 \r\n 进行换行, 碰到连续两个 \r\n 后内容为请求数据, 分为以下几个部分
请求行 (request line) 请求头 (header) 空行 请求数据 (body) curl -Lv http://baidu.com &gt; GET / HTTP/1.1 &gt; Host: baidu.com &gt; User-Agent: curl/7.68.0 &gt; Accept: */* &gt; * Mark bundle as not supporting multiuse &lt; HTTP/1....</p>
  </section>
  <footer class="entry-footer"><span title='2019-08-21 00:00:00 +0000 UTC'>八月 21, 2019</span>&nbsp;·&nbsp;2 分钟&nbsp;·&nbsp;Mioto Yaku</footer>
  <a class="entry-link" aria-label="post link to Go 100 行实现 HTTP(S) 正向代理" href="https://mioto.me/2019/08/http-s-proxy-in-golang-in-less-than-100-lines-of-code/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>破解某Wi-Fi探针魔盒的过程
    </h2>
  </header>
  <section class="entry-content">
    <p>有个老同学，在老家做销售工作， 某一天忽然联系我说我有个路由器可以扫描周边的 MAC Address 直接得到手机号，我一听这个牛逼啊，然后就让把路由器发来玩玩了
这东西有两个部分一个是手机应用程序，一个是路由器。
App抓包 最初设想路由器既然要用 Wi-Fi 手机当作热点数据必定经过手机，说干就干，下载了个 HttpCanary 然后对 App 抓包
过滤掉没用的接口后得到了两个核心接口（说真的 App 设计的真心让人恶心，所有权限都要可能为了读取手机上的联系人把）
用来获取已经匹配到的手机号的接口 GET http://x.hnyzlp.com/api/merchart/Operative/phone 用来设置心跳的接口，同时设置经纬度 GET http://x.hnyzlp.com/api/merchart/Operative/set_address 到此为止并没有 MAC 实际发出的地址， 所以由此可证明路由器直接将数据发送到了远端服务器，这条路被斩断了
路由器抓包 起初想的是通过 ARP 诈骗让自己家的路由器把数据发送到我指定的设备来实现抓包，但是！Mac 下各种问题，搞了一个多小时没搞定，卒！
后来想起来我的路由器是可编程的啊！，于是乎找了个 AC68U 可用的 tcpdump 路由器上抓指定网卡的的指定IP，然后！又得到了两个核心接口
用来设置路由器心跳， 一分钟请求一次 获取路由器上的运行时间， ARM 状况 等。 POST http://api.swsf3.cn/api_v1/remotecontrol 用来发送 mac 地址到服务端， 频率是 30 秒一次 POST http://api.swsf3.cn/api_v2/report 由此可见所有东西都全了！， 上传数据的接口， 以及查看数据的接口</p>
  </section>
  <footer class="entry-footer"><span title='2019-06-07 00:00:00 +0000 UTC'>六月 7, 2019</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;Mioto Yaku</footer>
  <a class="entry-link" aria-label="post link to 破解某Wi-Fi探针魔盒的过程" href="https://mioto.me/2019/06/cracking-mohe-process/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>部署 Kubernetes 遇到的问题
    </h2>
  </header>
  <section class="entry-content">
    <p>Unable to update cni config: No networks found in /etc/cni/net.d 由于设置了代理导致的错误, kubelet 无法通过代理链接到 kube-apiserve
解决办法:
unset http_proxy https_proxy # or export no_proxy=&lt;your_kube_apiserver_ip&gt; port 10251 and 10252 are in use 多次 init 导致的错误
解决办法:
kubeadm reset ROLES none 关于 ROLES &lt;none&gt; 的问题, 据说在 kubeadm join 的时候可以指定, 不过我每次都没看..
解决办法:
# 添加标签 kubectl label node {node name} node-role.kubernetes.io/{key}={value} # example kubectl label node host2 node-role.kubernetes.io/node2=node2 # 删除标签 kubectl label node {node name} node-role.kubernetes.io/{key}- # example kubectl label node host2 node-role....</p>
  </section>
  <footer class="entry-footer"><span title='2019-05-29 00:00:00 +0000 UTC'>五月 29, 2019</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;Mioto Yaku</footer>
  <a class="entry-link" aria-label="post link to 部署 Kubernetes 遇到的问题" href="https://mioto.me/2019/05/problem-swith-deploying-kubernetes/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="https://mioto.me/post/page/2/">« 上一页</a>
    <a class="next" href="https://mioto.me/post/page/4/">下一页 »</a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://mioto.me">一只麻酱</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
